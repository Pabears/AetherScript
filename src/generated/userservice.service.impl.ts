// Generated by AutoGen...
import { DB, User, UserService } from '../user';

export class UserServiceImpl extends UserService {
    constructor(db: DB) {
        super();
        this.db = db;
    }

    public create(user: User): void {
        // 1. check: 3<name.len()<15 and 0<=age<=120
        if (user.name.length < 3 || user.name.length > 15 || user.age < 0 || user.age > 120) {
            throw new Error('Invalid name or age');
        }

        // 2. db.save(user)
        this.db.save(user);
    }

    public findByName(name: string): User | undefined {
        // 1. check name, 2. db.find(name)
        if (name.length < 3 || name.length > 15) {
            return;
        }

        const user = this.db.find(name);
        return user ? user : undefined;
    }
}