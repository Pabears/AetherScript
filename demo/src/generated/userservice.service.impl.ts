import { UserService, DB } from "../user";

// Generated by AutoGen
import { User } from "../user";

export class UserServiceImpl extends UserService {
    public create(user: User): void {
        // 1. check: 3<name.len()<15 and 0<=age<=120
        const name = user.name;
        const age = user.age;
        if (name.length < 3 || name.length > 15) {
            throw new Error("Invalid name length");
        }
        if (age < 0 || age > 120) {
            throw new Error("Invalid age");
        }

        // 2. db.save(user)
        this.db.save(user);
    }

    public findByName(name: string): User | undefined {
        // 1. check name, 2. db.find(name)
        if (name.length < 3 || name.length > 15) {
            throw new Error("Invalid name length");
        }

        return this.db.find(name);
    }
}