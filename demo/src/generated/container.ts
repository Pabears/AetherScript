// Generated by AutoGen at 2025-07-17T12:43:57.941Z
import { CacheServiceImpl } from './cacheservice.service.impl';
import { CustomerServiceImpl } from './customerservice.service.impl';
import { OrderServiceImpl } from './orderservice.service.impl';
import { ProductServiceImpl } from './productservice.service.impl';
import { UserServiceImpl } from './userservice.service.impl';
import { DBImpl } from './db.service.impl';
import { NotificationServiceImpl } from './notificationservice.service.impl';

interface ServiceMap {
    'CacheService': CacheServiceImpl;
    'CustomerService': CustomerServiceImpl;
    'OrderService': OrderServiceImpl;
    'ProductService': ProductServiceImpl;
    'UserService': UserServiceImpl;
    'DB': DBImpl;
    'NotificationService': NotificationServiceImpl;
}

class Container {
    private instances: Map<keyof ServiceMap, any> = new Map();

    private factories: { [K in keyof ServiceMap]: () => ServiceMap[K] };

    constructor() {
        this.factories = {
        'CacheService': () => {
            const instance = new CacheServiceImpl();
            return instance;
        },
        'CustomerService': () => {
            const instance = new CustomerServiceImpl();
            instance.db = this.get('DB');
            return instance;
        },
        'OrderService': () => {
            const instance = new OrderServiceImpl();
            instance.db = this.get('DB');
            instance.productService = this.get('ProductService');
            instance.notificationService = this.get('NotificationService');
            return instance;
        },
        'ProductService': () => {
            const instance = new ProductServiceImpl();
            instance.db = this.get('DB');
            return instance;
        },
        'UserService': () => {
            const instance = new UserServiceImpl();
            instance.db = this.get('DB');
            return instance;
        },
        'DB': () => {
            const instance = new DBImpl();
            return instance;
        },
        'NotificationService': () => {
            const instance = new NotificationServiceImpl();
            instance.cacheService = this.get('CacheService');
            return instance;
        }
        };
    }

    public get<K extends keyof ServiceMap>(identifier: K): ServiceMap[K] {
        if (!this.instances.has(identifier)) {
            const factory = this.factories[identifier];
            if (!factory) {
                throw new Error('Service not found for identifier: ' + identifier);
            }
            const instance = factory();
            this.instances.set(identifier, instance);
        }
        return this.instances.get(identifier) as ServiceMap[K];
    }
}

export const container = new Container();
