// Generated by AutoGen at 2025-08-22T11:51:36.352Z
import { DBImpl } from './db.service.impl';
import { UserServiceImpl } from './userservice.service.impl';
import { UserServiceImpl } from './userservice.service.impl';
import { DBImpl } from './db.service.impl';

interface ServiceMap {
    'DB': DBImpl;
    'UserService': UserServiceImpl;
    'Userservice': UserServiceImpl;
    'Db': DBImpl;
}

class Container {
    private instances: Map<keyof ServiceMap, any> = new Map();
    private factories: { [K in keyof ServiceMap]: () => ServiceMap[K] };

    constructor() {
        this.factories = {
        'DB': () => {
            const instance = new DBImpl();
            return instance;
        },
        'UserService': () => {
            const instance = new UserServiceImpl();
            instance.db = this.get('DB');
            return instance;
        },
        'Userservice': () => {
            const instance = new UserServiceImpl();
            return instance;
        },
        'Db': () => {
            const instance = new DBImpl();
            return instance;
        }
        };
    }

    public get<K extends keyof ServiceMap>(identifier: K): ServiceMap[K] {
        if (!this.instances.has(identifier)) {
            const factory = this.factories[identifier];
            if (!factory) throw new Error('Service not found: ' + identifier);
            this.instances.set(identifier, factory());
        }
        return this.instances.get(identifier) as ServiceMap[K];
    }
}

export const container = new Container();
